<div class="groupe-add scrollable" data-visible="{{ IN page _ADD _SEARCH _CREATE }}">
    {{ INCLUDE this.currentNode "/template/app.groupes.add.html" }}
</div>
<div class="groupe-settings" data-visible="{{ EQUALS page _SETTINGS }}">
    {{ INCLUDE this.currentNode "/template/app.groupes.settings.html" }}
</div>
<div class="groupe-settings" data-visible="{{ EQUALS page _JOIN }}">
    {{ INCLUDE this.currentNode "/template/app.groupes.join.html" }}
</div>
<div class="groupe-browse" data-visible="{{ IN page _BROWSE _BROWSEDIR }}">
    {{ INCLUDE this.currentNode "/template/app.groupes.main.html" }}
</div>

<script>
    const pages = {
        ADD : "/app/groupes/add",
        CREATE : "/app/groupes/create",
        BROWSE : "/app/groupes/$id",
        BROWSEDIR : "/app/groupes/$id/*",
        SETTINGS : "/app/groupes/$id/settings",
        JOIN: "/app/groupes/$id/join",
        SEARCH : "/app/groupes/search/$searched"
    };

    doc.update({
        page : null,
        _ADD: pages.ADD,
        _SEARCH: pages.SEARCH,
        _CREATE: pages.CREATE,
        _SETTINGS: pages.SETTINGS,
        _JOIN: pages.JOIN,
        _BROWSE: pages.BROWSE,
        _BROWSEDIR: pages.BROWSEDIR
    });

    URLrooter.addListener(pages.ADD,       function () { doc.update({ page: pages.ADD       }); });
    URLrooter.addListener(pages.CREATE,    function () { doc.update({ page: pages.CREATE    }); });
    URLrooter.addListener(pages.BROWSE,    function () { doc.update({ page: pages.BROWSE    }); }, null, { id : /^[0-9]+$/ });
    URLrooter.addListener(pages.BROWSEDIR, function () { doc.update({ page: pages.BROWSEDIR }); }, null, { id : /^[0-9]+$/ });
    URLrooter.addListener(pages.SETTINGS,  function () { doc.update({ page: pages.SETTINGS  }); }, null, { id : /^[0-9]+$/ });
    URLrooter.addListener(pages.JOIN,      function () { doc.update({ page: pages.JOIN      }); }, null, { id : /^[0-9]+$/ });
    URLrooter.addListener(pages.SEARCH,    function () { doc.update({ page: pages.SEARCH    }); });
</script>